<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6E7RJD8L6J"></script>
    <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-6E7RJD8L6J');
    </script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Korean SRS Practice | love alphabets</title>
    <link rel="stylesheet" href="../_global/css/normalize.css">
    <link rel="stylesheet" href="../_global/css/layout.css">
    <link rel="stylesheet" href="../_global/css/language.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&family=Rochester&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <!-- favicon -->
    <link rel="manifest" href="/site.webmanifest">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
  
</head>

<body style="overflow-y: auto; overflow-x: hidden;">
    <div class="home-container">
        <header class="header main-background logo">
            <logo class="top-nav">
                <p class="logo-text">love alphabets</p>
            </logo>
        </header>
        <nav class="language-header">
            <div class="language-header-container">
                <h1 class="language-title">Korean</h1>
                <p class="sub">한글 (Hangul)</p>
            </div>
        </nav>
        <section class="home-wrapper">
            <div class="home">
                <article class="home-language">
                    <div class="home-language-card">
                        <span class="home-language-icon">ㅉ</span>
                        <div class="card-overlay">
                            <div id="korean-chart" class="home-cta top-cta">See the character chart →</div>
                            <div class="home-cta"><a class="home-cta-box" href="alphabet/">Launch SRS practice →</a></div>
                        </div>
                    </div>
                    <div class="heading-content">
                        <div class="language-heading">
                            <span>
                                <svg id="korean-favourite" class="favourite" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000">
                                    <path d="M0 0h24v24H0V0z" fill="none" />
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" /></svg>
                            </span>
                            Alphabet</div>
                        <div id="character" class="language-status"></div>
                    </div>
                </article>
                <article class="home-language">
                    <div class="home-language-card">
                        <span class="home-language-icon">주다</span>
                        <div class="card-overlay">
                            <div id="arabic-chart" class="home-cta top-cta">See the character chart →</div>
                            <div class="home-cta"><a class="home-cta-box" href="arabic/">Launch SRS practice →</a></div>
                        </div>
                    </div>
                    <div class="heading-content">
                        <div class="language-heading">
                            <span>
                                <svg id="arabic-favourite" class="favourite" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000">
                                    <path d="M0 0h24v24H0V0z" fill="none" />
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" /></svg>
                            </span>
                            100 Most common words</div>
                        <div id="arabic" class="language-status"></div>
                    </div>
                </article>
                <article class="home-language">
                    <div class="home-language-card">
                        <span class="home-language-icon">일</span>
                        <div class="card-overlay">
                            <div id="sino-cardinals-chart" class="home-cta top-cta">See the character chart →</div>
                            <div class="home-cta"><a class="home-cta-box" href="arabic/">Launch SRS practice →</a></div>
                        </div>
                    </div>
                    <div class="heading-content">
                        <div class="language-heading">
                            <span>
                                <svg id="sino-cardinals-favourite" class="favourite" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000">
                                    <path d="M0 0h24v24H0V0z" fill="none" />
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" /></svg>
                            </span>
                            Sino-Korean cardinals</div>
                        <div id="sino-cardinals" class="language-status"></div>
                    </div>
                </article>
                <article class="home-language">
                    <div class="home-language-card">
                        <span class="home-language-icon">하나</span>
                        <div class="card-overlay">
                            <div id="arabic-chart" class="home-cta top-cta">See the character chart →</div>
                            <div class="home-cta"><a class="home-cta-box" href="arabic/">Launch SRS practice →</a></div>
                        </div>
                    </div>
                    <div class="heading-content">
                        <div class="language-heading">
                            <span>
                                <svg id="arabic-favourite" class="favourite" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000">
                                    <path d="M0 0h24v24H0V0z" fill="none" />
                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" /></svg>
                            </span>
                            Native Korean cardinals</div>
                        <div id="arabic" class="language-status"></div>
                    </div>
                </article>
                <!-- <div id="overlay">
            <div class="loader"></div>
        </div> -->
            </div>
        </section>
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-column-right">
                    © 2021 <span class="logo-style">love alphabets</span>
                </div>
                <!--
        <div class="footer-column-left">
          <p class="footer-column-item">Read Korean Hangul</p>
          <p class="footer-column-item">Read Japanese Kana</p>
          <p class="footer-column-item">Read Devanagari (Hindi))</p>
          <p class="footer-column-item">Read Inuktitut (Nunavik)</p>
          <p class="footer-column-item">Read Amharic</p>
          <p class="footer-column-item">Read Modern Georgian</p>
          <p class="footer-column-item">Read Cherokee</p>
        </div> -->
            </div>
        </footer>
        <div id="popover-background"></div>
        <div id="chart-popover">
            <div id="chart-title" class="chart-title"></div>
            <div class="chart-popover-content">
                <div id="character-wrapper" class="character-wrapper">
                </div>
            </div>
            <div id="chart-close">✕</div>
        </div>
    </div>
    <script src="alphabet/_data/koreanMap.js"></script>
        <script src="sino-korean/_data/sinoKoreanMap.js"></script>
    <script>


    let now = new Date();
    //let todaysDate = now.toJSON().slice(0,10).replace(/-/g,'/');
    //let todaysDate = "2022/03/27"
    let startOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();
    //let startOfDay = new Date('2021/05/30').getTime();
    let endOfDay = startOfDay + (24 * 60 * 60 * 1000) - 1;


    for (item in localStorage) {
        if (item.includes("Progress") && item.includes("korean")) {

            let script = item.replace("SrsProgress", "").replace("korean", "").toLowerCase();
            console.log(script);
            let scriptStatus = document.getElementById(script);
            let progressObj = JSON.parse(localStorage.getItem(item));

            progressObjNextDate = progressObj.nextDate;

            /*if (progressObjNextDate == undefined || !progressObjNextDate) {
                scriptStatus.innerHTML = "";

            } */ 
            
            if (progressObjNextDate <= endOfDay) {
                scriptStatus.innerHTML = "due";
                scriptStatus.classList.add("due");
            } else {
                scriptStatus.innerHTML = "done";
                scriptStatus.classList.add("done");
            }
        }
    }


    const koreanChart = document.getElementById('korean-chart');
    koreanChart.addEventListener("click", function() { createChart(koreanChartData, koreanMap, "Korean Characters", "ko-KR") }, false);

    const sinoKoreanChart = document.getElementById('sino-cardinals-chart');
    sinoKoreanChart.addEventListener("click", function() { createChart(sinoKoreanChartData, sinoKoreanMap, "Sino-Korean Cardinals", "ko-KR") }, false);

    let characterWrapper = document.getElementById('character-wrapper');
    const characterTitle = document.querySelectorAll(".character-title");
    const category = document.getElementById('category');

    let chartClose = document.getElementById('chart-close');
    let popoverBackground = document.getElementById('popover-background');
    let chartPopover = document.getElementById('chart-popover');
    let body = document.body;
    popoverBackground.style.display = "none";

    chartClose.addEventListener("click", closeChartPopover);

    function closeChartPopover() {
        popoverBackground.style.display = "none";
        chartPopover.style.display = "none";
        body.style.overflowY = "auto";

        while (characterWrapper.firstChild) {
            characterWrapper.removeChild(characterWrapper.firstChild);
        }
    }

    function createChart(chartData, languageMap, str, language) {

        let speechLanguage = language;
        let chartTitle = document.getElementById('chart-title');
        chartTitle.innerHTML = str;
        let popoverBackground = document.getElementById('popover-background');
        let chartPopover = document.getElementById('chart-popover');
        let body = document.body;

        chartPopover.style.display = "inline-block";
        popoverBackground.style.display = "flex";
        body.style.overflowY = "hidden";

        Object.keys(chartData).forEach((item, i) => createCategory(chartData, languageMap, item, i, language));
        //openChartPopover();

        let cardArray = document.querySelectorAll(".character-card");

        cardArray.forEach(card => {

            if (language == undefined) {
                let cardId = card.id;
                let audioValue = "playAudio(" + " ' " + languageMap[cardId].audio + " ' " + ")";
                card.setAttribute("onclick", audioValue);
            } else {
                if (language == "ru-RU") {
                    var cardId = card.id.toLowerCase();
                } else {
                    var cardId = card.id;
                }

                card.addEventListener("click", function(e) {

                    if (speechLanguage && ('speechSynthesis' in window)) {
                        let sayIt = new SpeechSynthesisUtterance(cardId);
                        sayIt.lang = speechLanguage;
                        window.speechSynthesis.speak(sayIt);
                    }

                })
            }
        })
    }

    function createCategory(chartData, languageMap, n, i) {

        let characterWrapper = document.getElementById('character-wrapper');
        var item = chartData[n];
        let sub = item.subtitle;

        if (sub != undefined) {
            var categoryTitle = document.createElement("DIV");
            categoryTitle.innerHTML = sub;
            categoryTitle.className = "character-title";
        }

        let parentDiv = document.createElement("DIV");
        parentDiv.className = "category";
        parentDiv.id = "category-" + (i + 1);

        if (sub != undefined) {
            parentDiv.append(categoryTitle);
        }

        var contentDiv = document.createElement("DIV");
        contentDiv.className = chartData[n].column || "character-content-11-column"
        contentDiv.id = "category-content-" + (i + 1);

        if (sub == undefined) {
            contentDiv.style.margin = 0;
        }

        parentDiv.append(contentDiv);

        var consonantContent = item.content;

        Object.keys(consonantContent).forEach((character, n) => {

            let fidel = consonantContent[character];
            // Create target language character
            let topDiv = document.createElement("DIV");
            topDiv.innerHTML = fidel;
            topDiv.className = 'top';

            // Create target language character
            let bottomDiv = document.createElement("DIV");
            bottomDiv.innerHTML = languageMap[fidel].letter;
            bottomDiv.className = 'bottom';

            // Create parent div
            let parentDiv = document.createElement("DIV");
            parentDiv.className = "character-card";
            parentDiv.id = fidel;

            // Append both children to parent
            parentDiv.append(topDiv);
            parentDiv.append(bottomDiv);
            contentDiv.append(parentDiv);

        })

        characterWrapper.append(parentDiv);

    }
    </script>
</body>

</html>