2DevTools failed to load source map: Could not load content for chrome-extension://cfhdojbkjhnklbpkdaibdccddilifddb/browser-polyfill.js.map: System error: net::ERR_FILE_NOT_FOUND
58d9bbbb35f2a63e86dafca6:59 ServiceWorker registration successful with scope:  https://animelon.com/
58d9bbbb35f2a63e86dafca6:1 Error while trying to use the following icon from the Manifest: https://animelon.com/sub/en-jp/resources/img/logos/icon-144x144.png (Resource size is not correct - typo in the Manifest?)
DevTools failed to load source map: Could not load content for chrome-extension://cfhdojbkjhnklbpkdaibdccddilifddb/browser-polyfill.js.map: System error: net::ERR_FILE_NOT_FOUND
4:1506 Uncaught (in promise) No token found
(anonymous) @ 4:1506
$eval @ 4:1761
$digest @ 4:1725
(anonymous) @ 4:1764
e @ 4:521
(anonymous) @ 4:602
setTimeout (async)
m.defer @ 4:601
$evalAsync @ 4:1763
(anonymous) @ 4:1480
f @ 4:1503
$$resolve @ 4:1528
resolve @ 4:1525
(anonymous) @ 4:1500
m @ 4:1079
f @ 4:1076
(anonymous) @ 4:1077
w @ 4:1131
I.onload @ 4:1145
load (async)
(anonymous) @ 4:1142
m @ 4:1089
f @ 4:1057
(anonymous) @ 4:1506
$eval @ 4:1761
$digest @ 4:1725
$apply @ 4:1775
(anonymous) @ 4:1077
w @ 4:1131
I.onload @ 4:1145
load (async)
(anonymous) @ 4:1142
m @ 4:1089
f @ 4:1057
(anonymous) @ 4:1506
$eval @ 4:1761
$digest @ 4:1725
$apply @ 4:1775
(anonymous) @ 4:1077
w @ 4:1131
I.onload @ 4:1145
load (async)
(anonymous) @ 4:1142
m @ 4:1089
f @ 4:1057
(anonymous) @ 4:1506
$eval @ 4:1761
$digest @ 4:1725
$apply @ 4:1775
(anonymous) @ 4:1989
e @ 4:521
(anonymous) @ 4:602
setTimeout (async)
m.defer @ 4:601
f @ 4:1982
request @ 11:91
(anonymous) @ 4:1506
$eval @ 4:1761
$digest @ 4:1725
(anonymous) @ 4:1764
e @ 4:521
(anonymous) @ 4:602
setTimeout (async)
m.defer @ 4:601
$evalAsync @ 4:1763
(anonymous) @ 4:1480
f @ 4:1503
$$resolve @ 4:1528
resolve @ 4:1525
(anonymous) @ 4:1500
m @ 4:1079
f @ 4:1076
(anonymous) @ 4:1077
w @ 4:1131
I.onload @ 4:1145
load (async)
(anonymous) @ 4:1142
m @ 4:1089
f @ 4:1057
(anonymous) @ 4:1506
$eval @ 4:1761
$digest @ 4:1725
$apply @ 4:1775
(anonymous) @ 4:199
e @ 4:454
d @ 4:198
xc @ 4:205
Od @ 4:189
(anonymous) @ 4:3699
j @ 1:816
fireWith @ 1:848
ready @ 1:901
I @ 1:903
lw2HVJKuw7RU7k9H2WBARAzyORKcdkA3x2bsFPYTeQDjGjnmDJ1WXbcdRUUtSLyV8yMmeLPm7deElSk=m18:1          GET https://lh3.googleusercontent.com/lw2HVJKuw7RU7k9H2WBARAzyORKcdkA3x2bsFPYTeQDjGjnmDJ1WXbcdRUUtSLyV8yMmeLPm7deElSk=m18 404
r0p8w6Qva7ttedpml89z6puG8pgi4OD4Hk8skHpHeTM7tQ0y5yYNOMdUZHP-uGfBGiS71yB0Aj8OkWYlzQ=m18:1          GET https://lh3.googleusercontent.com/r0p8w6Qva7ttedpml89z6puG8pgi4OD4Hk8skHpHeTM7tQ0y5yYNOMdUZHP-uGfBGiS71yB0Aj8OkWYlzQ=m18 429
K2Yqic7amxckzkD9h3yh7IH6O_8PpUgItOi9FeCOwDJigE0LDzJIZiQyz8s-J-4hKC3kPTCGBCZ5XItV-_s=m18:1          GET https://lh3.googleusercontent.com/K2Yqic7amxckzkD9h3yh7IH6O_8PpUgItOi9FeCOwDJigE0LDzJIZiQyz8s-J-4hKC3kPTCGBCZ5XItV-_s=m18 429
K2p68b2o4N6LvCDjnZglBLngM2UviPBkbvRjx0gNNLM6QXgBBh5-8WAYQ4sBH-j6AFbacONyJDjjSX50rw=m18:1          GET https://lh3.googleusercontent.com/K2p68b2o4N6LvCDjnZglBLngM2UviPBkbvRjx0gNNLM6QXgBBh5-8WAYQ4sBH-j6AFbacONyJDjjSX50rw=m18 429
QFxv5NUcyNXWTsaxN6oSG1cmwgFPRi50aL8cTh-sEcR_NuX5hHVGj_9TQMj27t80y4oBXw73ItPJW-oPgg=m18:1          GET https://lh3.googleusercontent.com/QFxv5NUcyNXWTsaxN6oSG1cmwgFPRi50aL8cTh-sEcR_NuX5hHVGj_9TQMj27t80y4oBXw73ItPJW-oPgg=m18 404
4DevTools failed to load source map: Could not load content for chrome-extension://cfhdojbkjhnklbpkdaibdccddilifddb/browser-polyfill.js.map: System error: net::ERR_FILE_NOT_FOUND
cdn.viglink.com/images/pixel.gif?ch=2&rn=6.202742773200162:1          GET https://cdn.viglink.com/images/pixel.gif?ch=2&rn=6.202742773200162 net::ERR_BLOCKED_BY_CLIENT
Image (async)
detect @ alfie_v4.63f1ab6d6b9d5807dc0c94ef3fe0b851.js:2
(anonymous) @ alfie_v4.63f1ab6d6b9d5807dc0c94ef3fe0b851.js:2
(anonymous) @ alfie_v4.63f1ab6d6b9d5807dc0c94ef3fe0b851.js:2
(anonymous) @ alfie_v4.63f1ab6d6b9d5807dc0c94ef3fe0b851.js:2
(anonymous) @ alfie_v4.63f1ab6d6b9d5807dc0c94ef3fe0b851.js:1
a @ alfie_v4.63f1ab6d6b9d5807dc0c94ef3fe0b851.js:1
(anonymous) @ alfie_v4.63f1ab6d6b9d5807dc0c94ef3fe0b851.js:2
(anonymous) @ alfie_v4.63f1ab6d6b9d5807dc0c94ef3fe0b851.js:2
(anonymous) @ alfie_v4.63f1ab6d6b9d5807dc0c94ef3fe0b851.js:2
5DevTools failed to load source map: Could not load content for chrome-extension://cfhdojbkjhnklbpkdaibdccddilifddb/browser-polyfill.js.map: System error: net::ERR_FILE_NOT_FOUND
let lastCharacter = ""
let lastEnglishCharacter = ""
let obj = {}

// Find class containing subtitles
function getSub(subtitle){
    let arr = document.getElementsByClassName(subtitle)
    let str = [...arr].map(i => i.innerText)[0]
    return str
}

let id = 1;

// Arrange content into word object and add to obj
function processSub(){
    
    let character = getSub("japanese subtitle")
    let kana = getSub("hiragana subtitle")
    let english = getSub("an an2 anenglish")
    
    // If this is a new japanese line
    if(character != lastCharacter && character != undefined && english != undefined){
        lastCharacter = character
        lastEnglishCharacter = english
        let wordObj = { "character": character, "pinyin": kana, "letter": english }  
        obj[id] = wordObj
        console.log("new line")
        console.log(obj[id])
        id++
    }

    // If this is not a new japanese line, check if there are multiple english lines
    else if(character === lastCharacter && english !== lastEnglishCharacter){
        let wordObj = { "character": character, "pinyin": kana, "letter": lastEnglishCharacter + ' ' + english }
        lastEnglishCharacter = english
        obj[id-1] = wordObj
        console.log("updated line")
        console.log(obj[id-1])
    }
    
}


let subInterval = setInterval(processSub, 100)

setTimeout(function() {
  clearInterval(subInterval)
  console.log(obj)  
}, 1500000);
